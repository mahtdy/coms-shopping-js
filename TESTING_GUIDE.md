# ุฑุงูููุง ุชุณุช ู ุณูุงุฑููุง

ุงู ูุงู ุดุงูู ุฑุงูููุง ฺฉุงูู ุจุฑุง ุงุฌุฑุง ุชุณุชโูุง ู ุณูุงุฑููุง ุณุณุชู ุงุณุช.

## ๐ ููุฑุณุช ูุญุชูุง

1. [ุฑุงูโุงูุฏุงุฒ ุงููู](#ุฑุงูโุงูุฏุงุฒ-ุงููู)
2. [ุงุฌุฑุง Seed](#ุงุฌุฑุง-seed)
3. [ุงุฌุฑุง ุชุณุชโูุง](#ุงุฌุฑุง-ุชุณุชโูุง)
4. [ุณูุงุฑููุง ุชุณุช](#ุณูุงุฑููุง-ุชุณุช)

---

## ๐ ุฑุงูโุงูุฏุงุฒ ุงููู

### 1. ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
npm install
```

### 2. ุชูุธู ูุงู `.env`

ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุงู `.env` ุดุงูู ุชูุธูุงุช ุฒุฑ ุงุณุช:

```env
DB_URL=mongodb://127.0.0.1:27017/shopping-test
NODE_ENV=development
API_URL=http://localhost:7000
```

---

## ๐ฑ ุงุฌุฑุง Seed

Seed script ุฏุงุฏูโูุง ููููู (5 ุงุฏูู ู 10 ูุฒุฑ) ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ.

### ุฏุณุชูุฑ ุงุฌุฑุง:

```bash
npm run seed
```

### ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ:

```
โ ุงุชุตุงู ุจู ุฏุชุงุจุณ ุจุฑูุฑุงุฑ ุดุฏ.
๐ฑ ุฏุฑ ุญุงู ุงุฌุงุฏ ุงุฏููโูุง ููููู...
โ ุงุฏูู admin1 ุงุฌุงุฏ ุดุฏ.
โ ุงุฏูู admin2 ุงุฌุงุฏ ุดุฏ.
...
๐ฑ ุฏุฑ ุญุงู ุงุฌุงุฏ ูุฒุฑูุง ููููู...
โ ูุฒุฑ user1@test.com ุงุฌุงุฏ ุดุฏ.
...

โ Seed ุจุง ููููุช ุงูุฌุงู ุดุฏ!

๐ ุฎูุงุตู:
   - 5 ุงุฏูู ุงุฌุงุฏ ุดุฏ
   - 10 ูุฒุฑ ุงุฌุงุฏ ุดุฏ
   - 1 ุงูุจุงุฑ ุงุฌุงุฏ ุดุฏ

๐ ุงุทูุงุนุงุช ูุงฺฏู:
   ุงุฏููโูุง: admin1@test.com ุชุง admin5@test.com (ุฑูุฒ: Admin123!)
   ูุฒุฑูุง: user1@test.com ุชุง user10@test.com (ุฑูุฒ: User123!)
```

---

## ๐งช ุงุฌุฑุง ุชุณุชโูุง

### 1. ุชุณุชโูุง ูุงุญุฏ (Unit Tests)

```bash
npm test
```

ุงู ุฏุณุชูุฑ ุชูุงู ุชุณุชโูุง Jest ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.

### 2. ุงุฌุฑุง ุณูุงุฑููุง ุชุณุช (End-to-End)

```bash
npm run test-scenarios
```

ุงู ุฏุณุชูุฑ ุณูุงุฑููุง ุชุณุช ุฑุง ุจู ุตูุฑุช ุฏุณุช ุงุฌุฑุง ูโฺฉูุฏ.

**ูฺฉุชู:** ูุจู ุงุฒ ุงุฌุฑุง ุงู ุฏุณุชูุฑุ ูุทูุฆู ุดูุฏ ฺฉู:
- ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช (`npm run serve`)
- Seed ุงุฌุฑุง ุดุฏู ุงุณุช (`npm run seed`)

---

## ๐ ุณูุงุฑููุง ุชุณุช

### ูุงฺูู ุณุจุฏ ุฎุฑุฏ

#### ุณูุงุฑู 1: ุงูุฒูุฏู ูุญุตูู ุจู ุณุจุฏ

**Endpoint:** `POST /user/basket`

**Body:**
```json
{
  "basketList": [
    {
      "product": "product_id",
      "productwarehouse": "warehouse_id",
      "quantity": 2,
      "price": 100000
    }
  ]
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- Status: 200
- ูุญุตูู ุฏุฑ ุณุจุฏ ุซุจุช ุดูุฏ

---

#### ุณูุงุฑู 2: ุงูุฒุงุด ุชุนุฏุงุฏ ูุญุตูู

**Endpoint:** `POST /user/basket/increase`

**Body:**
```json
{
  "productwarehouse": "warehouse_id",
  "quantity": 1
}
```

---

### ูุงฺูู ุณูุงุฑุด

#### ุณูุงุฑู 1: ุงุฌุงุฏ ุณูุงุฑุด

**Endpoint:** `POST /user/order/checkout`

**Body:**
```json
{
  "address": "address_id",
  "sendType": 1,
  "sendTime": 2,
  "isBig": false,
  "offCode": "TEST20"
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- Status: 200
- ุณูุงุฑุด ุงุฌุงุฏ ุดูุฏ
- ุดูุงุฑู ูุงฺฉุชูุฑ ุชููุฏ ุดูุฏ
- ููุฌูุฏ ฺฉุงูุด ุงุจุฏ
- ุณุจุฏ ุฎุงู ุดูุฏ

---

### ูุงฺูู ุงูุจุงุฑ

#### ุณูุงุฑู 1: ุงูุฒูุฏู ููุฌูุฏ

**Endpoint:** `POST /admin/warehouse/:warehouseId/inventory`

**Body:**
```json
{
  "variantId": "variant_id",
  "quantity": 100,
  "variantPrice": 100000,
  "purchasePrice": 80000,
  "min_stock_threshold": 10,
  "batch_number": "BATCH-001"
}
```

---

### ูุงฺูู ุชุฎูู

#### ุณูุงุฑู 1: ุงุฌุงุฏ ฺฉุฏ ุชุฎูู

**Endpoint:** `POST /admin/discount`

**Body:**
```json
{
  "disTitle": "ุชุฎูู ุชุณุช 20%",
  "disType": "general",
  "applyOnInvoice": true,
  "autoApplyOnInvoice": false,
  "disStart": "2025-01-01T00:00:00Z",
  "disEnd": "2025-12-31T23:59:59Z",
  "firstInvoiceOnly": false,
  "amountRange": {
    "from": 100000,
    "to": 10000000
  },
  "disValue": {
    "type": "percent",
    "fixedAmount": 20
  },
  "maxProfitLimit": true,
  "usageCount": 100,
  "generateCode": true,
  "disCode": "TEST20",
  "filters": {
    "userFilter": {
      "allUsers": true
    },
    "productFilter": {
      "allProducts": true
    }
  },
  "isActive": true
}
```

---

## ๐ ุงุทูุงุนุงุช ูุงฺฏู ุชุณุช

### ุงุฏููโูุง

| ุดูุงุฑู | ุงูู | ุฑูุฒ ุนุจูุฑ | ููุน |
|------|-------|----------|-----|
| 1 | admin1@test.com | Admin123! | Super Admin |
| 2 | admin2@test.com | Admin123! | Admin |
| 3 | admin3@test.com | Admin123! | Admin |
| 4 | admin4@test.com | Admin123! | Admin |
| 5 | admin5@test.com | Admin123! | Admin |

### ูุฒุฑูุง

| ุดูุงุฑู | ุงูู | ุฑูุฒ ุนุจูุฑ | ููุฌูุฏ ฺฉู ูพูู |
|------|-------|----------|----------------|
| 1 | user1@test.com | User123! | 1,000,000 |
| 2 | user2@test.com | User123! | 500,000 |
| 3 | user3@test.com | User123! | 2,000,000 |
| 4 | user4@test.com | User123! | 750,000 |
| 5 | user5@test.com | User123! | 300,000 |
| 6 | user6@test.com | User123! | 1,500,000 |
| 7 | user7@test.com | User123! | 800,000 |
| 8 | user8@test.com | User123! | 1,200,000 |
| 9 | user9@test.com | User123! | 600,000 |
| 10 | user10@test.com | User123! | 900,000 |

---

## ๐ ฺฺฉโูุณุช ุชุณุช

### ูุจู ุงุฒ ุชุณุช

- [ ] Seed ุงุฌุฑุง ุดุฏู ุงุณุช
- [ ] ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
- [ ] ุฏุชุงุจุณ ูุชุตู ุงุณุช
- [ ] ูุญุตููุงุช ู ุงูุจุงุฑูุง ุงุฌุงุฏ ุดุฏูโุงูุฏ

### ุชุณุชโูุง ุณุจุฏ ุฎุฑุฏ

- [ ] ุงูุฒูุฏู ูุญุตูู ูููู
- [ ] ุงูุฒูุฏู ูุญุตูู ุจุง ููุฌูุฏ ูุงฺฉุงู
- [ ] ุงูุฒุงุด/ฺฉุงูุด ุชุนุฏุงุฏ
- [ ] ุญุฐู ูุญุตูู

### ุชุณุชโูุง ุณูุงุฑุด

- [ ] ุงุฌุงุฏ ุณูุงุฑุด ูููู
- [ ] ุงุฌุงุฏ ุณูุงุฑุด ุจุง ุชุฎูู
- [ ] ุงุฌุงุฏ ุณูุงุฑุด ุจุฏูู ุขุฏุฑุณ
- [ ] ุฑูฺฏุฑ ุณูุงุฑุด

### ุชุณุชโูุง ุงูุจุงุฑ

- [ ] ุงูุฒูุฏู ููุฌูุฏ
- [ ] ฺฉุงูุด ููุฌูุฏ
- [ ] ุงูุชูุงู ููุฌูุฏ
- [ ] ฺฏุฒุงุฑุด ููุฌูุฏ ฺฉู

### ุชุณุชโูุง ุชุฎูู

- [ ] ุงุฌุงุฏ ฺฉุฏ ุชุฎูู
- [ ] ุงุนูุงู ฺฉุฏ ูุนุชุจุฑ
- [ ] ุงุนูุงู ฺฉุฏ ูููุถ ุดุฏู
- [ ] ุชุฎูู ุฎูุฏฺฉุงุฑ

---

## ๐ ุนุจโุงุจ

### ูุดฺฉู: Seed ุงุฌุฑุง ููโุดูุฏ

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ุงุชุตุงู ุจู ุฏุชุงุจุณ
2. ุจุฑุฑุณ ูุฌูุฏ ุฏุงุฏูโูุง ูุจู (ููฺฉู ุงุณุช ูุงุฒ ุจู ูพุงฺฉ ฺฉุฑุฏู ุจุงุดุฏ)
3. ุจุฑุฑุณ ุฎุทุงูุง console

### ูุดฺฉู: ุชุณุชโูุง fail ูโุดููุฏ

**ุฑุงูโุญู:**
1. ูุทูุฆู ุดูุฏ Seed ุงุฌุฑุง ุดุฏู ุงุณุช
2. ุจุฑุฑุณ ูุฌูุฏ ุฏุงุฏูโูุง ููุฑุฏ ูุงุฒ (ูุญุตููุงุชุ ุงูุจุงุฑูุง)
3. ุจุฑุฑุณ ูุงฺฏโูุง ุฎุทุง

### ูุดฺฉู: ูุงฺฏู ูุงูููู ุงุณุช

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ุงุฌุฑุง Seed
2. ุจุฑุฑุณ ุตุญุช ุงูู ู ุฑูุฒ ุนุจูุฑ
3. ุจุฑุฑุณ endpoint ูุงฺฏู

---

## ๐ ูฺฉุงุช ููู

1. **ุฏุชุงุจุณ ุชุณุช:** ุงุฒ ุฏุชุงุจุณ ุฌุฏุงฺฏุงูู ุจุฑุง ุชุณุช ุงุณุชูุงุฏู ฺฉูุฏ
2. **ูพุงฺฉ ฺฉุฑุฏู ุฏุงุฏูโูุง:** ูพุณ ุงุฒ ุชุณุชุ ุฏุงุฏูโูุง ุชุณุช ุฑุง ูพุงฺฉ ฺฉูุฏ
3. **ุจฺฉุงูพ:** ูุจู ุงุฒ Seedุ ุงุฒ ุฏุงุฏูโูุง ููู ุจฺฉุงูพ ุจฺฏุฑุฏ
4. **ููุฌูุฏ:** ูุจู ุงุฒ ุชุณุช checkoutุ ููุฌูุฏ ูุญุตููุงุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

---

## ๐ ุฌุฑุงู ฺฉุงูู ุชุณุช

```bash
# 1. ุฑุงูโุงูุฏุงุฒ
npm install
npm run build

# 2. ุงุฌุฑุง Seed
npm run seed

# 3. ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ (ุฏุฑ ุชุฑููุงู ุฌุฏุงฺฏุงูู)
npm run serve

# 4. ุงุฌุฑุง ุชุณุชโูุง
npm test

# 5. ุงุฌุฑุง ุณูุงุฑููุง ุฏุณุช
npm run test-scenarios
```

---

ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑุ ุจู ูุงู `TEST_SCENARIOS.md` ูุฑุงุฌุนู ฺฉูุฏ.

